<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Assignment 2</title>
    <script src="https://d3js.org/d3.v5.js"></script>
    <style>
        select{display: block;}
    </style>
</head>
<body>
    <div id="plot">
        <select class="years"></select>
        <select class="win_diff">
            <option id="WR">WR</option>
            <option id="DG">DG</option>
        </select>
        <select class="WDL">
            <option id="W">W</option>
            <option id="D">D</option>
            <option id="L">L</option>
        </select>
    </div>

    <script>
    function translate(plotX, plotY){
        return 'translate(' + plotX + ', ' + plotY + ')';
    }
    
    svgWidth = 450;
    svgHeight = 450;
    marginTop = 40;
    marginLeft = 20;

    d3.json('data.json').then(function(data){
        data.forEach(function(d){
            d.rankings.forEach(function(d2){
                d2.rank = parseFloat(d2.rank);
                d2.games = parseFloat(d2.games);
                d2.W = parseFloat(d2.W);
                d2.L = parseFloat(d2.L);
                d2.D = parseFloat(d2.D);
                d2.diff_game = parseFloat(d2.diff_game);
                d2.win_rate = parseFloat(d2.win_rate);
            })
        })


        let year_selection = d3.select('.years')
                                .selectAll('option')
                                    .data(data)
                                    .join('option')
                                    .text(k => k.year)
                                    .attr('id', k=> k.year)

        let table = d3.select('#plot')
                        .append('svg')
                        .attr('id', 'table')
                        .attr('width', svgWidth)
                        .attr('height', svgHeight)
            
        d3.select('.years')
            .on("change", function(d){
                let selected = d3.select('.years').node().value;
                console.log(selected);
            })
        
        // let table_title = table.append('g')
        //                 .attr('id', 'title')
        //                 .attr('transform', translate(marginLeft, marginTop))
        //                 .data(test_rankings)
        //                 .append('text')
        //                     .text(x => x)

        
    })

    </script>
</body>
</html>